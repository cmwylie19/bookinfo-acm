Define aliases for Cluster
```
CLUSTER_NAME=us-east-1
```
Create and label namespace
```
apiVersion: v1
kind: Namespace
metadata:
  labels:
    cluster.open-cluster-management.io/managedCluster: us-east-1
  name: us-east-1
```

Add ManagedCluster 
```
apiVersion: cluster.open-cluster-management.io/v1
kind: ManagedCluster
metadata:
  name: us-east-1
  labels:
    env: dev
    region: us-east-1
spec:
  hubAcceptsClient: true
```

Create klusterlet addon config file
```
apiVersion: agent.open-cluster-management.io/v1
kind: KlusterletAddonConfig
metadata:
  name: us-east-1
  namespace: us-east-1
spec:
  clusterName: us-east-1
  clusterNamespace: us-east-1
  applicationManager:
    enabled: true
  certPolicyController:
    enabled: true
  clusterLabels:
    cloud: auto-detect
    vendor: auto-detect
  iamPolicyController:
    enabled: true
  policyController:
    enabled: true
  searchCollector:
    enabled: true
  version: 2.2.0
```

Obtain the `klusterlet-crd.yaml` generated by managed cluster
```
oc get secret us-east-1-import -n us-east-1 -o jsonpath={.data.crds\\.yaml} | base64 --decode > klusterlet-crd.yaml
```

Obtain the `import.yaml` that was generated by the managed cluster 
```
oc get secret ${CLUSTER_NAME}-import -n ${CLUSTER_NAME} -o jsonpath={.data.import\\.yaml} | base64 --decode > import.yaml
```

# Log into the managed cluster
Apply the clusterlet-crd.yaml
```
kubectl apply -f klusterlet-crd.yaml
```

Apply the `import.yaml`
```
kubectl apply -f import.yaml
```